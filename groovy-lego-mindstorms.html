<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8">

    <title>Getting Groovy With Lego Minstorms EV3</title>

    <meta name="description" content="Workshop to Learn how to program Groovy on leJOS and have a chance to interact with it">
    <meta name="author" content="Ryan Vanderwerf">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
        if( window.location.search.match( /print-pdf/gi ) ) {
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = 'css/print/pdf.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        }
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">
<section>
    <h1>Getting Groovy with Lego Mindstorms</h1>
    <h3>Learn how to get your Groovy on with Legos!</h3>
    <p>
        <small>Created by <a href="http://rvanderwerf.blogspot.com">Ryan Vanderwerf</a> / <a href="http://twitter.com/RyanVanderwerf">@RyanVanderwerf</a></small>
    </p>
</section>
<section>

    <div style="" > <img src="Duke_Blocks.gif" height="150" width="150"> <span style="display: block; margin: 0px auto; text-align: center;">+</span> </font><img src="groovy-logo-medium.png" height="150" width="200"> <span style="display: block; margin: 0px auto; text-align: center;">+</span> <IMG SRC="mindstorms.png" height="150" width="150"/> <span style="display:table-cell; vertical-align:middle;">= FUN!</span>
    </div>
</section>
<section>
    <h2>About Me</h2>

    <ul>
        <li>Chief Architect @ ReachForce</li>
        <li>Father of 2 girls under 10</li>
        <li>Co-Chair Austin Groovy and Grails User Group</li>
        <li>Help maintain Grails Quartz plugin</li>
        <li>Maintain GVPS Plugin (Grails Video Pseudo Streamer)</li>
        <li>Maintain Struts-1 Plugin</li>
        <li>Submit pull requests for others when I can!</li>
    </ul>
</section>
<section>
    <h2>What we will cover</h2>
    <ul>
        <li>What is the EV3?</li>
        <li class="fragment">What is leJOS?
        </li>
        <li class="fragment">
            Layout and components of leJOS
        </li>
        <li class="fragment">
            Programming Model
        </li>

        <li class="fragment">
            How build components of leJOS with Gradle
        </li>
        <li class="fragment">
            Overview of leJOS APIs
        </li>
        <li class="fragment">
            Run some demo apps on leJOS
        </li>
        <li class="fragment">
            Build and deploy a demo leJOS Groovy App
        </li>
        <li class="fragment">
            More advanced topics - Sensors and Events
        </li>
        <li class="fragment">
            Let's add some sensors to our apps we've built!
        </li>
        <li class="fragment">
            WebRover 1 -  Build, Run, and Play!
        </li>
    </ul>

    <aside class="notes">

    </aside>
</section>

<!-- Example of nested vertical slides -->

<section>
    <section>
        <h2>What is EV3?</h2>
        <p>
            EV3 is the latest generation LEGO Mindstorm Platform
        </p>
        <p>TI ARM9 Core CPU (Runs ARMv5 instruction set)</p>
        <p>64MB RAM</p>
        <p>16gb internal flash</p>
        <p>microSD slot</p>
        <p>bluetooth wireless</p>
        <p>usb port</p>
        <p>New generation of 'smarter sensors' (single sensors replace many nxt ones)</p>
        <p>One big difference vs Raspberry Pi is it is a ARM11 with ARMv7 instruction set with hardfp(w/jdk!)</p>
    </section>


</section>
<section>
    <section>
        <h2>What is leJOS?</h2>
        <p>
            leJOS is a Java-based implemention that started on the lego mindstorm RCX platform that runs on arm based processors.
            leJOS was forked oringally from the 'TinyVM' project in 2000.
        </p>
        <p>Available in 3 flavors: RCX, NXJ, and EV3 that are all still maintained</p>

    </section>


    <section>
        <h2>What is LeJOS?</h2>
        <ul>
          <li class="fragment">Replacement firmware for building Lego Robots in Java</li>
          <li class="fragment">PC Tools for flashing Lego Brick</li>
          <li class="fragment">PC Apps to communicate to your robot from your PC via bluetooth, Wifi, USB</li>
          <li class="fragment">Creates a running jar package to deploy on your robot for execution</li>
        </ul>

    </section>

    <section>
        <h2>Why no Groovy before now?</h2>
        <ul>
            <li class="fragment">Groovy was too slow before @StaticCompile (Soft FP)</li>
            <li class="fragment">More limited audience</li>
            <li class="fragment">Many Java people still not educated on Groovy(but this has grown!)</li>
            <li class="fragment">leJOS didn't provide an easy way to run Groovy(core commiters indifferent to Groovy)</li>

        </ul>

    </section>

</section>
    <section>
        <h2>Layouts and components of leJOS</h2>
        <ul>
            <li class="fragment">OS Image</li>
            <li class="fragment">DBusJava</li>
            <li class="fragment">EV3 Classes</li>
            <li class="fragment">EV3 Menu</li>
            <li class="fragment">Other components</li>
        </ul>
    </section>
    <section>
    <section>
        <h2>OS Image</h2>
        <p>This is the base linux install image leJOS runs on</p>

        <ul>
            <li class="fragment">Runs minimal OS and kernel - only subset of basic shell options and commands available</li>
            <li class="fragment">On code drop on your usb key, located in /ev3snapshot </li>
            <li class="fragment">On Windows there is a exe installer</li>
            <li class="fragment">On Linux or Mac, write sd500.img to your microSD card, then unzip sdcard/lejosimage.zip to roots</li>
            <li class="fragment">Other components</li>
        </ul>
    </section>

    <section>
        <h2>OS Image</h2>
        <p>Runs minimal OS and kernel - only subset of basic shell options and commands available</p>

        <ul>
            <li class="fragment">shell is 'ash' nowhere near feature comparable to bash</li>
            <li class="fragment">ps command only has 1 parameter 'w' for wide</li>
            <li class="fragment">leJOS interacts with it by starting up a java app called 'EV3Menu' </li>
            <li class="fragment">There isn't really enough RAM to run more than 1 VM besides what leJOS uses (hello oom killer!)</li>
        </ul>
    </section>
    </section>
    <section>
    <h2>DBusJava</h2>
    <p>JNI Layer that interacts with physical hardware</p>

    <ul>
        <li class="fragment">This is the glue to makes JVM classes work</li>
        <li class="fragment">Generally you don't need to do anything with it unless you are adding unsupported hardware</li>
        <li class="fragment">see the README file under DBusJava/src for how to add modules (outside scope of us here)</li>
        <li class="fragment">Feel free to use the artifact on my Bintray account, compile your own with the scripts, or use your own artifact server</li>
    </ul>
</section>

<section>
<section>
    <h2>EV3Classes</h2>
    <p>Supporting Java classes for leJOS</p>

    <ul>
        <li class="fragment">This is all the Java implementation classes for the system</li>
        <li class="fragment">This is a monolithic code base/lib at this point all projects depend on this to work</li>
        <li class="fragment">I've created some custom classes inside here to allow the Webrover to work (later) </li>
        <li class="fragment">Divided into 4 sections - Hardware, Internal, Robotics and Utility </li>
        <li class="fragment">Hardware - Java representation of the lego hardware items</li>
    </ul>
</section>
<section>
    <h2>EV3Classes</h2>
    <p>Hardware</p>

    <ul>
        <li class="fragment">Support for Tetrix metal robots</li>
        <li class="fragment">Supports motors from EV3, NXT, RCX,  Mindsensors Glidewheel-M, regulated and unregulated </li>
        <li class="fragment">Supports GPS with this device <a href="http://www.dexterindustries.com/dGPS.html">http://www.dexterindustries.com/dGPS.html</a> </li>
        <li class="fragment">Ports - these are there the low level devices sensors are connected to (Mostly I2C/UART)</li>
        <li class="fragment">Sensors - supports over 40 different kinds of sensors from Lego, Dextor, HiTechnic and Mindsensors</li>
        <li class="fragment">LocalEV3 is the singleton class to get access to things (show example in code)</li>
        <li class="fragment">Basic hardware objects on EV3 brick itself are in lejos.hardware base pkg (Audio, LCD, buttons and keys)</li>
    </ul>

</section>
<section>
    <h2>EV3Classes</h2>
    <p>Internal</p>

    <ul>
        <li class="fragment">Handles bluetooth pairing with DBusJava</li>
        <li class="fragment">Internal EV3 implementation classes not part of public API</li>
        <li class="fragment">Low level linux hardware access classes (NIO)</li>
        <li class="fragment">If you use the classes they are subject to change without and kind of deprecation or notice</li>

    </ul>

</section>
<section>
    <h2>EV3Classes</h2>
    <p>Remote</p>

    <ul>
        <li class="fragment">Mainly uses RMI</li>
        <li class="fragment">RemoteEV3 is main classes to access remotely (give it IP address)</li>
        <li class="fragment">Accessing hardware remotely pretty much as a 1:1 relation with 'Remote' in front of classs</li>
        <li class="fragment">Wifi support most stable</li>

        <li class="fragment">Bluetooth is not working, but not considered 100% stable</li>
        <li class="fragment">When accessing ports, you must pass in the the proper 1 or 2 letter names (S[1-9] or letter A-F on motor ports</li>
        <li class="fragment">Let's look at some <a href="https://sourceforge.net/p/lejos/wiki/Remote%20access%20to%20an%20EV3/">RemoteEV3</a> code usage!</li>

    </ul>

</section>
<section>
    <h2>EV3Classes</h2>
    <p>Robotics</p>

    <ul>
        <li class="fragment">The fun stuff! Doing something with all of these classes, sensors and motors</li>
        <li class="fragment">filters - filters for sample providers such as SumFilter which takes the sum of samples over time, or MedianFilter</li>
        <li class="fragment">geometry - geometric shape support using float co-ordinates</li>
        <li class="fragment">localization - BeaconPoseProvider, CompassPoseProvider, MCLPoseProvider, OdometryPostProvider</li>
        <li class="fragment">mapping - adds support for maps- Main class is EV3NavigationModel which takes Pilot, Navigator, PoseProvider, RangeScanner, FeatureFinder</li>

    </ul>

</section>
<section>
    <h2>EV3Classes</h2>
    <p>Robotics - continued</p>

    <ul>

        <li class="fragment">navigation - classes for physically navigating the robot around - DifferentialPilot, SteeringPilot, OmniPilot</li>
        <li class="fragment">object detection - Feature detector, Fusor detector, RangeFeature, and TouchFeature</li>
        <li class="fragment">pathfinding - most of these use a map to determine a path for the robot to take (Dijkstra, Random, Shortest, Node)</li>
        <li class="fragment">subsumption - Arbitrator and Behavior</li>
    </ul>

</section>
<section>
    <h2>EV3Classes</h2>
    <p>Utilities</p>

    <ul>
        <li class="fragment">general utility classes - things like Timers, property mgt, delays, debugs </li>

    </ul>

</section>


</section>
<section>
<section>
    <h2>Programming Model</h2>
    <p>Behavior Programming</p>

    <ul>
        <li class="fragment">Why? Creates less spaghetti code of if-then-else statements</li>
        <li class="fragment">Uses threads to keep multiple things going on to allow different 'behaviors' to react </li>
        <li class="fragment">Interface uses only 3 methods - action, suppress, and takeControl</li>
        <li class="fragment">Uses to main Interfaces - Behavior and Artibrator</li>


    </ul>

</section>
<section>
    <h2>Programming Model</h2>
    <p>Behavior Programming</p>

    <img src="lejos-behavior1.png"/>

</section>
<section>
    <h2>Programming Model</h2>
    <p>Behavior Programming - continued</p>

    <ul>


        <li class="fragment">Artibrator takes over from your 3 behavior classes after they are complete</li>
        <li class="fragment">Artibrator regulates when behaviors become active</li>
        <li class="fragment">Enter and escape will stop unless returnwheninactive is set upon creation</li>
        <li class="fragment">Takes an array of behaviors</li>


    </ul>

</section>
<section>
    <h2>Programming Model</h2>
    <p>Behavior Programming - continued</p>

    <ul>


        <li class="fragment">Simple to use, only method is start() - higher level behaviors suppress lower ones</li>
        <li class="fragment">The array of behaviors passed in, index order determines priority of arbitrator to control behaviors</li>
        <li class="fragment">Recommended design pattern - define boolean flag 'supppressed' for each behavior, set variable to true by supress method, test in each action method. first thing in action method is to set this to false</li>
        <li class="fragment">Action must be coded for prompt exit from method</li>
    </ul>

</section>

<section>
    <h2>Programming Model</h2>
    <p>Behavior Programming - suppression</p>

    <a href="http://www.lejos.org/nxt/nxj/tutorial/Behaviors/BehaviorProgramming.htm" target="_new"><img src="lejos-behavior-suppress1.png"/></a>

</section>

    <section>
        <h2>Programming Model</h2>
        <p>Let's work on our example!</p>

    </section>


</section>

<section>
    <h2>Slides</h2>
    <p>
        Not a coder? No problem. There's a fully-featured visual editor for authoring these, try it out at <a href="http://slid.es" target="_blank">http://slid.es</a>.
    </p>
</section>

<section>
    <h2>Point of View</h2>
    <p>
        Press <strong>ESC</strong> to enter the slide overview.
    </p>
    <p>
        Hold down alt and click on any element to zoom in on it using <a href="http://lab.hakim.se/zoom-js">zoom.js</a>. Alt + click anywhere to zoom back out.
    </p>
</section>

<section>
    <h2>Works in Mobile Safari</h2>
    <p>
        Try it out! You can swipe through the slides and pinch your way to the overview.
    </p>
</section>

<section>
    <h2>Marvelous Unordered List</h2>
    <ul>
        <li>No order here</li>
        <li>Or here</li>
        <li>Or here</li>
        <li>Or here</li>
    </ul>
</section>

<section>
    <h2>Fantastic Ordered List</h2>
    <ol>
        <li>One is smaller than...</li>
        <li>Two is smaller than...</li>
        <li>Three!</li>
    </ol>
</section>

<section data-markdown>
    <script type="text/template">
        ## Markdown support

        For those of you who like that sort of thing. Instructions and a bit more info available [here](https://github.com/hakimel/reveal.js#markdown).

        ```
        <section data-markdown>
            ## Markdown support

            For those of you who like that sort of thing.
            Instructions and a bit more info available [here](https://github.com/hakimel/reveal.js#markdown).
        </section>
        ```
    </script>
</section>

<section id="transitions">
    <h2>Transition Styles</h2>
    <p>
        You can select from different transitions, like: <br>
        <a href="?transition=cube#/transitions">Cube</a> -
        <a href="?transition=page#/transitions">Page</a> -
        <a href="?transition=concave#/transitions">Concave</a> -
        <a href="?transition=zoom#/transitions">Zoom</a> -
        <a href="?transition=linear#/transitions">Linear</a> -
        <a href="?transition=fade#/transitions">Fade</a> -
        <a href="?transition=none#/transitions">None</a> -
        <a href="?#/transitions">Default</a>
    </p>
</section>

<section id="themes">
    <h2>Themes</h2>
    <p>
        Reveal.js comes with a few themes built in: <br>
        <a href="?#/themes">Default</a> -
        <a href="?theme=sky#/themes">Sky</a> -
        <a href="?theme=beige#/themes">Beige</a> -
        <a href="?theme=simple#/themes">Simple</a> -
        <a href="?theme=serif#/themes">Serif</a> -
        <a href="?theme=night#/themes">Night</a> <br>
        <a href="?theme=moon#/themes">Moon</a> -
        <a href="?theme=solarized#/themes">Solarized</a>
    </p>
    <p>
        <small>
            * Theme demos are loaded after the presentation which leads to flicker. In production you should load your theme in the <code>&lt;head&gt;</code> using a <code>&lt;link&gt;</code>.
        </small>
    </p>
</section>

<section>
    <h2>Global State</h2>
    <p>
        Set <code>data-state="something"</code> on a slide and <code>"something"</code>
        will be added as a class to the document element when the slide is open. This lets you
        apply broader style changes, like switching the background.
    </p>
</section>

<section data-state="customevent">
    <h2>Custom Events</h2>
    <p>
        Additionally custom events can be triggered on a per slide basis by binding to the <code>data-state</code> name.
    </p>
					<pre><code data-trim contenteditable style="font-size: 18px; margin-top: 20px;">
                        Reveal.addEventListener( 'customevent', function() {
                        console.log( '"customevent" has fired' );
                        } );
                    </code></pre>
</section>

<section>
    <section data-background="#007777">
        <h2>Slide Backgrounds</h2>
        <p>
            Set <code>data-background="#007777"</code> on a slide to change the full page background to the given color. All CSS color formats are supported.
        </p>
        <a href="#" class="image navigate-down">
            <img width="178" height="238" src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow">
        </a>
    </section>
    <section data-background="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png">
        <h2>Image Backgrounds</h2>
        <pre><code>&lt;section data-background="image.png"&gt;</code></pre>
    </section>
    <section data-background="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" data-background-repeat="repeat" data-background-size="100px">
        <h2>Repeated Image Backgrounds</h2>
        <pre><code style="word-wrap: break-word;">&lt;section data-background="image.png" data-background-repeat="repeat" data-background-size="100px"&gt;</code></pre>
    </section>
</section>

<section data-transition="linear" data-background="#4d7e65" data-background-transition="slide">
    <h2>Background Transitions</h2>
    <p>
        Pass reveal.js the <code>backgroundTransition: 'slide'</code> config argument to make backgrounds slide rather than fade.
    </p>
</section>

<section data-transition="linear" data-background="#8c4738" data-background-transition="slide">
    <h2>Background Transition Override</h2>
    <p>
        You can override background transitions per slide by using <code>data-background-transition="slide"</code>.
    </p>
</section>

<section>
    <h2>Clever Quotes</h2>
    <p>
        These guys come in two forms, inline: <q cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
        &ldquo;The nice thing about standards is that there are so many to choose from&rdquo;</q> and block:
    </p>
    <blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
        &ldquo;For years there has been a theory that millions of monkeys typing at random on millions of typewriters would
        reproduce the entire works of Shakespeare. The Internet has proven this theory to be untrue.&rdquo;
    </blockquote>
</section>

<section>
    <h2>Pretty Code</h2>
					<pre><code data-trim contenteditable>
                        function linkify( selector ) {
                        if( supports3DTransforms ) {

                        var nodes = document.querySelectorAll( selector );

                        for( var i = 0, len = nodes.length; i &lt; len; i++ ) {
                        var node = nodes[i];

                        if( !node.className ) {
                        node.className += ' roll';
                        }
                        }
                        }
                        }
                    </code></pre>
    <p>Courtesy of <a href="http://softwaremaniacs.org/soft/highlight/en/description/">highlight.js</a>.</p>
</section>

<section>
    <h2>Intergalactic Interconnections</h2>
    <p>
        You can link between slides internally,
        <a href="#/2/3">like this</a>.
    </p>
</section>

<section>
    <section id="fragments">
        <h2>Fragmented Views</h2>
        <p>Hit the next arrow...</p>
        <p class="fragment">... to step through ...</p>
        <ol>
            <li class="fragment"><code>any type</code></li>
            <li class="fragment"><em>of view</em></li>
            <li class="fragment"><strong>fragments</strong></li>
        </ol>

        <aside class="notes">
            This slide has fragments which are also stepped through in the notes window.
        </aside>
    </section>
    <section>
        <h2>Fragment Styles</h2>
        <p>There's a few styles of fragments, like:</p>
        <p class="fragment grow">grow</p>
        <p class="fragment shrink">shrink</p>
        <p class="fragment roll-in">roll-in</p>
        <p class="fragment fade-out">fade-out</p>
        <p class="fragment highlight-red">highlight-red</p>
        <p class="fragment highlight-green">highlight-green</p>
        <p class="fragment highlight-blue">highlight-blue</p>
        <p class="fragment current-visible">current-visible</p>
        <p class="fragment highlight-current-blue">highlight-current-blue</p>
    </section>
</section>

<section>
    <h2>Spectacular image!</h2>
    <a class="image" href="http://lab.hakim.se/meny/" target="_blank">
        <img width="320" height="299" src="http://s3.amazonaws.com/hakim-static/portfolio/images/meny.png" alt="Meny">
    </a>
</section>

<section>
    <h2>Export to PDF</h2>
    <p>Presentations can be <a href="https://github.com/hakimel/reveal.js#pdf-export">exported to PDF</a>, below is an example that's been uploaded to SlideShare.</p>
    <iframe id="slideshare" src="http://www.slideshare.net/slideshow/embed_code/13872948" width="455" height="356" style="margin:0;overflow:hidden;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px" allowfullscreen> </iframe>
    <script>
        document.getElementById('slideshare').attributeName = 'allowfullscreen';
    </script>
</section>

<section>
    <h2>Take a Moment</h2>
    <p>
        Press b or period on your keyboard to enter the 'paused' mode. This mode is helpful when you want to take distracting slides off the screen
        during a presentation.
    </p>
</section>

<section>
    <h2>Stellar Links</h2>
    <ul>
        <li><a href="http://slid.es">Try the online editor</a></li>
        <li><a href="https://github.com/hakimel/reveal.js">Source code on GitHub</a></li>
        <li><a href="http://twitter.com/hakimel">Follow me on Twitter</a></li>
    </ul>
</section>

<section>
    <h1>THE END</h1>
    <h3>BY Hakim El Hattab / hakim.se</h3>
</section>

</div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>

<script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
            { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
            { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
            { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
    });

</script>

</body>
</html>